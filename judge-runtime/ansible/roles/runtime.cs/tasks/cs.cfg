name: "cs-runtime"
description: "Run as: sudo nsjail --config /etc/runtime/cs.cfg -- [cmd]"

hostname: "cs-runtime"
mode: ONCE

envar: "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
envar: "LANG=en_US.UTF-8"
envar: "HOME=/user"
envar: "TMP=/tmp"
envar: "DOTNET_CLI_TELEMETRY_OPTOUT=true"
envar: "DOTNET_NOLOGO=true"

rlimit_as: 262144
rlimit_fsize: 2560000
rlimit_cpu: 1
rlimit_cpu_type: INF
rlimit_nofile: 6411

max_cpus: 2
time_limit: 20

use_cgroupv2: true
cgroup_pids_max: 50

uidmap {
	inside_id: "65534"
	outside_id: "65534"
	count: 1
}

gidmap {
	inside_id: "65534"
	outside_id: "65534"
	count: 1
}

mount_proc: false

mount {
	src_content: "nobody:x:65534:65534:nobody:/tmp:/bin/bash"
	dst: "/etc/passwd"
	mandatory: false
}

mount {
	src_content: "nogroup::65534:nogroup"
	dst: "/etc/group"
	mandatory: false
}

mount {
	dst: "/user"
	fstype: "tmpfs"
	rw: true
}

mount {
	dst: "/tmp"
	fstype: "tmpfs"
	rw: true
}

mount {
	src: "/bin"
	dst: "/bin"
	is_bind: true
	rw: false
}

mount {
	src: "/lib"
	dst: "/lib"
	is_bind: true
	rw: false
}

mount {
	src: "/lib64"
	dst: "/lib64"
	is_bind: true
	rw: false
}

mount {
	src: "/usr/bin"
	dst: "/usr/bin"
	is_bind: true
	rw: false
}

mount {
	src: "/usr/lib"
	dst: "/usr/lib"
	is_bind: true
	rw: false
}

mount {
	src: "/usr/share/dotnet"
	dst: "/usr/share/dotnet"
	is_bind: true
	rw: false
}

mount {
	dst: "/proc"
	fstype: "proc"
	rw: false
}

mount {
	src: "/dev/null"
	dst: "/dev/null"
	is_bind: true
	rw: true
}

mount {
	dst: "/dev/shm"
	fstype: "tmpfs"
	rw: true
	is_bind: false
}

mount {
	src: "/dev/urandom"
	dst: "/dev/urandom"
	is_bind: true
	rw: false
}

mount {
	src: "/dev/random"
	dst: "/dev/random"
	is_bind: true
	rw: false
}
